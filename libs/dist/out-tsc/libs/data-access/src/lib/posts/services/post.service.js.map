{"version":3,"file":"post.service.js","sourceRoot":"","sources":["../../../../../../../../data-access/src/lib/posts/services/post.service.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AACnD,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,MAAM,sBAAsB,CAAC;AAQ9D,OAAO,EAAE,GAAG,EAAE,MAAM,MAAM,CAAC;AAKpB,IAAM,WAAW,GAAjB,MAAM,WAAW;IACL,IAAI,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;IAC1B,UAAU,GAAG,aAAa,CAAC;IAE5C,eAAe;IACf,UAAU,CAAC,OAAsB;QAC/B,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAO,GAAG,IAAI,CAAC,UAAU,OAAO,EAAE,OAAO,CAAC,CAAC;IAClE,CAAC;IAED,gBAAgB;IAChB,UAAU,CAAC,MAAc,EAAE,OAAiB;QAC1C,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAO,GAAG,IAAI,CAAC,UAAU,QAAQ,MAAM,EAAE,EAAE,OAAO,CAAC,CAAC;IAC5E,CAAC;IAED,iBAAiB;IACjB,UAAU;QACR,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAS,GAAG,IAAI,CAAC,UAAU,OAAO,CAAC,CAAC;IAC1D,CAAC;IAED,eAAe;IACf,UAAU,CAAC,MAAc;QACvB,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAO,GAAG,IAAI,CAAC,UAAU,QAAQ,MAAM,EAAE,CAAC,CAAC;IACpE,CAAC;IAED,sBAAsB;IACtB,aAAa,CAAC,OAAyB;QACrC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAc,GAAG,IAAI,CAAC,UAAU,UAAU,EAAE,OAAO,CAAC,CAAC;IAC5E,CAAC;IAED,sBAAsB;IACtB,aAAa,CAAC,MAAc;QAC1B,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAO,GAAG,IAAI,CAAC,UAAU,WAAW,MAAM,EAAE,CAAC,CAAC;IACvE,CAAC;IAED,iBAAiB;IACjB,OAAO,CAAC,MAAc;QACpB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CACnB,GAAG,IAAI,CAAC,UAAU,aAAa,MAAM,EAAE,EACvC,EAAE,CACH,CAAC;IACJ,CAAC;IAED,eAAe;IACf,UAAU,CAAC,MAAc;QACvB,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CACrB,GAAG,IAAI,CAAC,UAAU,aAAa,MAAM,EAAE,CACxC,CAAC;IACJ,CAAC;IAED,wBAAwB;IACxB,cAAc,CAAC,UAAkB;QAC/B,IAAI,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;QAC9B,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;QAC9C,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAS,GAAG,IAAI,CAAC,UAAU,OAAO,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;IAC9E,CAAC;IAED,yCAAyC;IACzC,gBAAgB,CAAC,MAAc;QAC7B,OAAO,IAAI,CAAC,IAAI;aACb,GAAG,CAAO,GAAG,IAAI,CAAC,UAAU,QAAQ,MAAM,EAAE,CAAC;aAC7C,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;IACtC,CAAC;IAED,qBAAqB;IACrB,QAAQ,CAAC,QAAkB;QACzB,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAW,GAAG,IAAI,CAAC,UAAU,OAAO,EAAE,QAAQ,CAAC,CAAC;IACxE,CAAC;CACF,CAAA;AAnEY,WAAW;IAHvB,UAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,WAAW,CAmEvB","sourcesContent":["import { inject, Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport {\n  CommentCreateDto,\n  Post,\n  PostComment,\n  PostCreateDto,\n  PostEdit,\n} from '@tt/interfaces/post/post.interface';\nimport { map } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PostService {\n  private readonly http = inject(HttpClient);\n  private readonly baseApiUrl = '/yt-course/';\n\n  // Создать пост\n  createPost(payload: PostCreateDto) {\n    return this.http.post<Post>(`${this.baseApiUrl}post/`, payload);\n  }\n\n  // Обновить пост\n  updatePost(postId: number, payload: PostEdit) {\n    return this.http.patch<Post>(`${this.baseApiUrl}post/${postId}`, payload);\n  }\n\n  // Получить посты\n  fetchPosts() {\n    return this.http.get<Post[]>(`${this.baseApiUrl}post/`);\n  }\n\n  // Удалить пост\n  deletePost(postId: number) {\n    return this.http.delete<void>(`${this.baseApiUrl}post/${postId}`);\n  }\n\n  // Создать комментарий\n  createComment(payload: CommentCreateDto) {\n    return this.http.post<PostComment>(`${this.baseApiUrl}comment/`, payload);\n  }\n\n  // Удалить комментарий\n  deleteComment(postId: number) {\n    return this.http.delete<void>(`${this.baseApiUrl}comment/${postId}`);\n  }\n\n  // Поставить лайк\n  addLike(postId: number) {\n    return this.http.post<{ message: string }>(\n      `${this.baseApiUrl}post/like/${postId}`,\n      {}\n    );\n  }\n\n  // Удалить лайк\n  deleteLike(postId: number) {\n    return this.http.delete<{ message: string }>(\n      `${this.baseApiUrl}post/like/${postId}`\n    );\n  }\n\n  // Получить посты UserId\n  getPostsUserId(queryParam: number) {\n    let params = new HttpParams();\n    params = params.append('user_id', queryParam);\n    return this.http.get<Post[]>(`${this.baseApiUrl}post/`, { params: params });\n  }\n\n  //  Искуственное получение пост-комментов\n  getCommentPostId(postId: number) {\n    return this.http\n      .get<Post>(`${this.baseApiUrl}post/${postId}`)\n      .pipe(map((res) => res.comments));\n  }\n\n  // Редактировать пост\n  editPost(editPost: PostEdit) {\n    return this.http.patch<PostEdit>(`${this.baseApiUrl}post/`, editPost);\n  }\n}\n"]}