{"version":3,"file":"effects.js","sourceRoot":"","sources":["../../../../../../../../data-access/src/lib/posts/store/effects.ts"],"names":[],"mappings":"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","sourcesContent":["import { inject } from '@angular/core';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { postsActions } from './actions';\nimport { map, switchMap } from 'rxjs';\nimport { PostService } from '../services/post.service';\n\nexport class PostEffects {\n  actions$ = inject(Actions);\n  private readonly postService = inject(PostService);\n\n  // getPosts$ = createEffect(() => {\n  //   return this.actions$.pipe(\n  //     ofType(postsActions.loadPosts),\n  //     switchMap(() => {\n  //       return this.postService\n  //         .fetchPosts()\n  //         .pipe(\n  //           map((response) => postsActions.loadedPosts({ posts: response }))\n  //         );\n  //     })\n  //   );\n  // });\n  addPost$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(postsActions.createPost),\n      switchMap((data) => {\n        return this.postService\n          .createPost(data)\n          .pipe(map((post) => postsActions.createdPost(post)));\n      })\n    );\n  });\n  deletePostId$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(postsActions.deletePost),\n      switchMap((data) => {\n        return this.postService\n          .deletePost(data.postId)\n          .pipe(map(() => postsActions.deletedPost({ postId: data.postId })));\n      })\n    );\n  });\n  getPostsUserId$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(postsActions.loadPostsUserId),\n      switchMap((data) => {\n        return this.postService\n          .getPostsUserId(data.userId)\n          .pipe(\n            map((response) =>\n              postsActions.loadedPostsUserId({ userPosts: response })\n            )\n          );\n      })\n    );\n  });\n  addCommentPost$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(postsActions.createComment),\n      switchMap((data) => {\n        return this.postService\n          .createComment(data)\n          .pipe(map((response) => postsActions.createdComment(response)));\n      })\n    );\n  });\n  deleteCommentId$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(postsActions.deleteComment),\n      switchMap((data) => {\n        return this.postService.deleteComment(data.commentId).pipe(\n          map(() =>\n            postsActions.deletedComment({\n              postId: data.postId,\n              commentId: data.commentId,\n            })\n          )\n        );\n      })\n    );\n  });\n  editPost$ = createEffect(() => {\n    return this.actions$.pipe(\n      ofType(postsActions.editPost),\n      switchMap((data) => {\n        return this.postService\n          .updatePost(data.postId, data.postEdit)\n          .pipe(map((post) => postsActions.editedPost(post)));\n      })\n    );\n  });\n}\n"]}