{"version":3,"file":"reducers.js","sourceRoot":"","sources":["../../../../../../../../data-access/src/lib/profile/store/reducers.ts"],"names":[],"mappings":"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","sourcesContent":["import { Profile, QueryParamsProfile } from '@tt/interfaces/profile';\r\nimport { createFeature, createReducer, on } from '@ngrx/store';\r\nimport { profileActions } from './actions';\r\nimport { Pagination } from '@tt/shared';\r\n\r\nexport interface ProfileState {\r\n  profileMe: Profile | undefined;\r\n  userId: string;\r\n  user: Profile | undefined;\r\n  profiles: Profile[];\r\n  profileFilters: Partial<QueryParamsProfile>;\r\n  pagination: {\r\n    currentPage: number;\r\n    perPage: number;\r\n    totalPages: number;\r\n    total: number;\r\n  };\r\n  isLoading: boolean;\r\n}\r\n\r\nconst DEFAULT_PAGINATION: Pagination = {\r\n  total: 0,\r\n  currentPage: 0,\r\n  perPage: 0,\r\n  totalPages: 0\r\n};\r\n\r\nconst initialState: ProfileState = {\r\n  profileMe: undefined,\r\n  userId: '',\r\n  user: undefined,\r\n  profiles: [],\r\n  profileFilters: {},\r\n  pagination: DEFAULT_PAGINATION,\r\n  isLoading: false\r\n};\r\n\r\nexport const profileFeature = createFeature({\r\n  name: 'profileFeature',\r\n  reducer: createReducer(\r\n    initialState,\r\n    on(profileActions.loadedGetMe, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        profileMe: payload.profileMe\r\n      };\r\n    }),\r\n    on(profileActions.loadedPatchMe, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        profileMe: payload\r\n      };\r\n    }),\r\n    on(profileActions.loadedPatchAvatarMe, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        profileMe: payload\r\n      };\r\n    }),\r\n    on(profileActions.loadUserId, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        userId: payload.userId\r\n      };\r\n    }),\r\n    on(profileActions.loadedUser, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        user: payload.user\r\n      };\r\n    }),\r\n    on(profileActions.profilesLoaded, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        profiles: payload.profiles\r\n      };\r\n    }),\r\n    on(profileActions.filterEvents, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        profiles: [],\r\n        profileFilters: {\r\n          ...state.profileFilters,\r\n          ...payload\r\n        }\r\n      };\r\n    }),\r\n    on(profileActions.paginationProfiles, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        pagination: {\r\n          ...state.pagination,\r\n          ...payload\r\n        }\r\n      };\r\n    }),\r\n    on(profileActions.paginationSet, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        pagination: { ...payload }\r\n      };\r\n    }),\r\n    on(profileActions.loadingStartProfiles, (state) => {\r\n      return {\r\n        ...state,\r\n        isLoading: true\r\n      };\r\n    }),\r\n    on(profileActions.loadingEndProfiles, (state) => {\r\n      return {\r\n        ...state,\r\n        isLoading: false\r\n      };\r\n    }),\r\n    on(profileActions.loadedInfiniteProfiles, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        pagination: {\r\n          total: payload.total,\r\n          currentPage: payload.page,\r\n          perPage: payload.size,\r\n          totalPages: payload.pages\r\n        },\r\n        profiles: state.profiles.concat(payload.items)\r\n      };\r\n    }),\r\n    on(profileActions.loadedPaginationProfiles, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        pagination: {\r\n          total: payload.total,\r\n          currentPage: payload.page,\r\n          perPage: payload.size,\r\n          totalPages: payload.pages\r\n        },\r\n        profiles: payload.items,\r\n      };\r\n    }),\r\n    on(profileActions.deleteStoreProfiles, (state, payload) => {\r\n      return {\r\n        ...state,\r\n        profiles: []\r\n      };\r\n    }),\r\n  )\r\n});\r\n"]}