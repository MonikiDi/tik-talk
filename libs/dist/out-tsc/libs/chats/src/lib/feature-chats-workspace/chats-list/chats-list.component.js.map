{"version":3,"file":"chats-list.component.js","sourceRoot":"","sources":["../../../../../../../../chats/src/lib/feature-chats-workspace/chats-list/chats-list.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  computed,\n  ElementRef,\n  HostListener,\n  inject,\n  OnInit,\n  Renderer2,\n} from '@angular/core';\nimport { FormControl, ReactiveFormsModule } from '@angular/forms';\nimport { SvgIconComponent } from '@tt/common-ui';\nimport { ChatsBtnComponent } from '../chats-btn/chats-btn.component';\nimport { RouterLink, RouterLinkActive } from '@angular/router';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { Debounce } from '@tt/shared';\nimport { Store } from '@ngrx/store';\nimport { chatsActions, selectLastMessageChatMap } from '@tt/data-access';\n\n@Component({\n  selector: 'app-chats-list',\n  standalone: true,\n  imports: [\n    ReactiveFormsModule,\n    SvgIconComponent,\n    ChatsBtnComponent,\n    RouterLinkActive,\n    RouterLink,\n  ],\n  templateUrl: './chats-list.component.html',\n  styleUrl: './chats-list.component.scss',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ChatsListComponent implements OnInit, AfterViewInit {\n  public hostElement = inject(ElementRef);\n  public r2 = inject(Renderer2);\n  public store = inject(Store);\n\n  filterChatsControl = new FormControl('');\n\n  public chats = this.store.selectSignal(selectLastMessageChatMap);\n\n  private readonly filterChatsControlValue = toSignal(\n    this.filterChatsControl.valueChanges,\n    { initialValue: this.filterChatsControl.value }\n  );\n\n  public filterChats = computed(() => {\n    const inputValue = this.filterChatsControlValue();\n    return this.chats()\n      .filter((chat) => {\n        return `${chat.userFrom.firstName} ${chat.userFrom.lastName}`\n          .toLowerCase()\n          .includes(inputValue!.toLowerCase() ?? '');\n      })\n      .slice()\n      .sort((a, b) => {\n        return new Date(a.createdAt) > new Date(b.createdAt) ? -1 : 1;\n      });\n  });\n\n  ngOnInit() {\n    this.store.dispatch(chatsActions.loadLastMessageChatMap());\n  }\n  ngAfterViewInit() {\n    this.resizeFeed();\n  }\n\n  // 2 Метод c Декоратором\n  @Debounce(20)\n  @HostListener('window: resize')\n  onWindowResize() {\n    this.resizeFeed();\n  }\n\n  public resizeFeed() {\n    const { top } = this.hostElement.nativeElement.getBoundingClientRect();\n    const height = window.innerHeight - top - 48;\n    this.r2.setStyle(this.hostElement.nativeElement, 'height', `${height}px`);\n  }\n}\n"]}