{"version":3,"file":"post-input.component.js","sourceRoot":"","sources":["../../../../../../../../posts/src/lib/ui/post-input/post-input.component.ts"],"names":[],"mappings":";AAAA,OAAO,EACL,uBAAuB,EACvB,SAAS,EACT,MAAM,EAEN,YAAY,EACZ,WAAW,EACX,MAAM,EACN,KAAK,EACL,KAAK,EACL,MAAM,EACN,SAAS,EACT,MAAM,EACN,SAAS,GACV,MAAM,eAAe,CAAC;AACvB,OAAO,EAAE,IAAI,EAAE,MAAM,iBAAiB,CAAC;AACvC,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAC7C,OAAO,EAAE,qBAAqB,EAAE,gBAAgB,EAAE,MAAM,eAAe,CAAC;AACxE,OAAO,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;AACpC,OAAO,EAAE,eAAe,EAAE,MAAM,iBAAiB,CAAC;AAU3C,IAAM,kBAAkB,GAAxB,MAAM,kBAAkB;IACZ,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IACtB,EAAE,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;IACvB,cAAc,GAC7B,SAAS,CAAC,QAAQ,CAAmB,gBAAgB,CAAC,CAAC;IAClD,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;IACnD,MAAM,GAAG,KAAK,CAAqB,OAAO,CAAC,CAAC;IAC5C,WAAW,GAAG,KAAK,CAAS,EAAE,CAAC,CAAC;IAChC,QAAQ,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC;IAEpB,IAAW,IAAI,CAAC,KAAa;QACpC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IAC3B,CAAC;IAES,UAAU,GAAG,IAAI,YAAY,EAAU,CAAC;IACxC,QAAQ,GAAG,IAAI,YAAY,EAAU,CAAC;IAGhD,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,MAAM,EAAE,KAAK,QAAQ,CAAC;IACpC,CAAC;IAED;QACE,MAAM,CAAC,GAAG,EAAE;YACV,MAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;YAElC,IAAI,SAAS,KAAK,EAAE,EAAE;gBACpB,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,aAAa,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;aACzE;iBAAM;gBACL,IAAI,CAAC,EAAE,CAAC,QAAQ,CACd,IAAI,CAAC,cAAc,EAAE,CAAC,aAAa,EACnC,QAAQ,EACP,IAAI,CAAC,cAAc,EAAE,CAAC,aAAqB,CAAC,YAAY,GAAG,IAAI,CACjE,CAAC;aACH;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,YAAY,CAAC,KAAa;QACxB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC9B,CAAC;CACF,CAAA;AA/BU;IAAR,KAAK,EAAE;8CAEP;AAES;IAAT,MAAM,EAAE;sDAAyC;AACxC;IAAT,MAAM,EAAE;oDAAuC;AAGhD;IADC,WAAW,CAAC,eAAe,CAAC;mDAG5B;AApBU,kBAAkB;IAR9B,SAAS,CAAC;QACT,QAAQ,EAAE,gBAAgB;QAC1B,UAAU,EAAE,IAAI;QAChB,OAAO,EAAE,CAAC,qBAAqB,EAAE,IAAI,EAAE,gBAAgB,EAAE,WAAW,CAAC;QACrE,WAAW,EAAE,6BAA6B;QAC1C,QAAQ,EAAE,6BAA6B;QACvC,eAAe,EAAE,uBAAuB,CAAC,MAAM;KAChD,CAAC;GACW,kBAAkB,CAyC9B","sourcesContent":["import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  effect,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostBinding,\r\n  inject,\r\n  Input,\r\n  input,\r\n  Output,\r\n  Renderer2,\r\n  signal,\r\n  viewChild,\r\n} from '@angular/core';\r\nimport { NgIf } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { AvatarCircleComponent, SvgIconComponent } from '@tt/common-ui';\r\nimport { Store } from '@ngrx/store';\r\nimport { selectProfileMe } from '@tt/data-access';\r\n\r\n@Component({\r\n  selector: 'app-post-input',\r\n  standalone: true,\r\n  imports: [AvatarCircleComponent, NgIf, SvgIconComponent, FormsModule],\r\n  templateUrl: './post-input.component.html',\r\n  styleUrl: './post-input.component.scss',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class PostInputComponent {\r\n  private readonly store = inject(Store);\r\n  private readonly r2 = inject(Renderer2);\r\n  private readonly textAreaTarget =\r\n    viewChild.required<ElementRef<void>>('textAreaTarget');\r\n  public profile = this.store.selectSignal(selectProfileMe);\r\n  public border = input<'solid' | 'dashed'>('solid');\r\n  public placeholder = input<string>('');\r\n  public postText = signal('');\r\n\r\n  @Input() public set data(value: string) {\r\n    this.postText.set(value);\r\n  }\r\n\r\n  @Output() dataChange = new EventEmitter<string>();\r\n  @Output() onSubmit = new EventEmitter<string>();\r\n\r\n  @HostBinding('class.comment')\r\n  get isComment() {\r\n    return this.border() === 'dashed';\r\n  }\r\n\r\n  constructor() {\r\n    effect(() => {\r\n      const textValue = this.postText();\r\n\r\n      if (textValue === '') {\r\n        this.r2.setStyle(this.textAreaTarget().nativeElement, 'height', 'auto');\r\n      } else {\r\n        this.r2.setStyle(\r\n          this.textAreaTarget().nativeElement,\r\n          'height',\r\n          (this.textAreaTarget().nativeElement as any).scrollHeight + 'px'\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  onDataChange(value: string) {\r\n    this.dataChange.emit(value);\r\n  }\r\n}\r\n"]}