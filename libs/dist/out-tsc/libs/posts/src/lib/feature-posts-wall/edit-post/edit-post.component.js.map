{"version":3,"file":"edit-post.component.js","sourceRoot":"","sources":["../../../../../../../../posts/src/lib/feature-posts-wall/edit-post/edit-post.component.ts"],"names":[],"mappings":";AAAA,OAAO,EAEL,uBAAuB,EACvB,SAAS,EACT,MAAM,EAEN,YAAY,EACZ,MAAM,EACN,KAAK,EAEL,MAAM,EACN,SAAS,EACT,SAAS,EACT,SAAS,EACV,MAAM,eAAe,CAAC;AAEvB,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAC7C,OAAO,EAAE,YAAY,EAAE,MAAM,iBAAiB,CAAC;AAC/C,OAAO,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;AAU7B,IAAM,iBAAiB,GAAvB,MAAM,iBAAiB;IACX,EAAE,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;IACvB,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IACtB,cAAc,GAC7B,SAAS,CAAC,QAAQ,CAAmB,gBAAgB,CAAC,CAAC;IAClD,IAAI,GAAG,KAAK,CAAC,QAAQ,EAAQ,CAAC;IAC9B,QAAQ,GAAa;QAC1B,KAAK,EAAE,EAAE;QACT,OAAO,EAAE,EAAE;KACZ,CAAC;IACQ,QAAQ,GAAG,IAAI,YAAY,EAAW,CAAC;IACpB,QAAQ,CAAyB;IAE9D;QACE,MAAM,CAAC,GAAG,EAAE;YACV,IAAI,CAAC,EAAE,CAAC,QAAQ,CACd,IAAI,CAAC,cAAc,EAAE,CAAC,aAAa,EACnC,QAAQ,EACP,IAAI,CAAC,cAAc,EAAE,CAAC,aAAqB,CAAC,YAAY,GAAG,IAAI,CACjE,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAED,eAAe;QACb,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;SACrC;IACH,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC;QAC5C,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;IAC5C,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,KAAK,CAAC,QAAQ,CACjB,YAAY,CAAC,QAAQ,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAC3E,CAAC;QACF,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;CACF,CAAA;AAlCW;IAAT,MAAM,EAAE;mDAAwC;AACpB;IAA5B,SAAS,CAAC,gBAAgB,CAAC;mDAAkC;AAXnD,iBAAiB;IAR7B,SAAS,CAAC;QACT,QAAQ,EAAE,eAAe;QACzB,UAAU,EAAE,IAAI;QAChB,OAAO,EAAE,CAAC,WAAW,CAAC;QACtB,WAAW,EAAE,4BAA4B;QACzC,QAAQ,EAAE,4BAA4B;QACtC,eAAe,EAAE,uBAAuB,CAAC,MAAM;KAChD,CAAC;GACW,iBAAiB,CA4C7B","sourcesContent":["import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  effect,\n  ElementRef,\n  EventEmitter,\n  inject,\n  input,\n  OnInit,\n  Output,\n  Renderer2,\n  ViewChild,\n  viewChild\n} from '@angular/core';\nimport { Post, PostEdit } from '@tt/interfaces/post/post.interface';\nimport { FormsModule } from '@angular/forms';\nimport { postsActions } from '@tt/data-access';\nimport { Store } from '@ngrx/store';\n\n@Component({\n  selector: 'app-edit-post',\n  standalone: true,\n  imports: [FormsModule],\n  templateUrl: './edit-post.component.html',\n  styleUrl: './edit-post.component.scss',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class EditPostComponent implements OnInit, AfterViewInit {\n  private readonly r2 = inject(Renderer2);\n  private readonly store = inject(Store);\n  private readonly textAreaTarget =\n    viewChild.required<ElementRef<void>>('textAreaTarget');\n  public post = input.required<Post>();\n  public postEdit: PostEdit = {\n    title: '',\n    content: '',\n  };\n  @Output() showEdit = new EventEmitter<boolean>();\n  @ViewChild('textAreaTarget') editPost: ElementRef | undefined;\n\n  constructor() {\n    effect(() => {\n      this.r2.setStyle(\n        this.textAreaTarget().nativeElement,\n        'height',\n        (this.textAreaTarget().nativeElement as any).scrollHeight + 'px'\n      );\n    });\n  }\n\n  ngAfterViewInit() {\n    if (this.editPost) {\n      this.editPost.nativeElement.focus();\n    }\n  }\n\n  ngOnInit() {\n      this.postEdit.content = this.post().content;\n      this.postEdit.title = this.post().title;\n  }\n\n  submitEditPost() {\n    this.store.dispatch(\n      postsActions.editPost({ postId: this.post().id, postEdit: this.postEdit })\n    );\n    this.showEdit.emit(false);\n  }\n\n  cancelEditPost() {\n    this.showEdit.emit(false);\n  }\n}\n"]}