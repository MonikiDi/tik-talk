{"version":3,"file":"edit-post.component.js","sourceRoot":"","sources":["../../../../../../../../posts/src/lib/feature-posts-wall/edit-post/edit-post.component.ts"],"names":[],"mappings":";AAAA,OAAO,EAEL,uBAAuB,EACvB,SAAS,EACT,MAAM,EAEN,YAAY,EACZ,MAAM,EACN,KAAK,EAEL,MAAM,EACN,SAAS,EACT,SAAS,EACT,SAAS,EACV,MAAM,eAAe,CAAC;AAEvB,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAC7C,OAAO,EAAE,YAAY,EAAE,MAAM,iBAAiB,CAAC;AAC/C,OAAO,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;AAU7B,IAAM,iBAAiB,GAAvB,MAAM,iBAAiB;IACX,EAAE,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;IACvB,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IACtB,cAAc,GAC7B,SAAS,CAAC,QAAQ,CAAmB,gBAAgB,CAAC,CAAC;IAClD,IAAI,GAAG,KAAK,CAAC,QAAQ,EAAQ,CAAC;IAC9B,QAAQ,GAAa;QAC1B,KAAK,EAAE,EAAE;QACT,OAAO,EAAE,EAAE;KACZ,CAAC;IACQ,QAAQ,GAAG,IAAI,YAAY,EAAW,CAAC;IACpB,QAAQ,CAAyB;IAE9D;QACE,MAAM,CAAC,GAAG,EAAE;YACV,IAAI,CAAC,EAAE,CAAC,QAAQ,CACd,IAAI,CAAC,cAAc,EAAE,CAAC,aAAa,EACnC,QAAQ,EACP,IAAI,CAAC,cAAc,EAAE,CAAC,aAAqB,CAAC,YAAY,GAAG,IAAI,CACjE,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAED,eAAe;QACb,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;SACrC;IACH,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC;QAC5C,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;IAC5C,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,KAAK,CAAC,QAAQ,CACjB,YAAY,CAAC,QAAQ,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAC3E,CAAC;QACF,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;CACF,CAAA;AAlCW;IAAT,MAAM,EAAE;mDAAwC;AACpB;IAA5B,SAAS,CAAC,gBAAgB,CAAC;mDAAkC;AAXnD,iBAAiB;IAR7B,SAAS,CAAC;QACT,QAAQ,EAAE,eAAe;QACzB,UAAU,EAAE,IAAI;QAChB,OAAO,EAAE,CAAC,WAAW,CAAC;QACtB,WAAW,EAAE,4BAA4B;QACzC,QAAQ,EAAE,4BAA4B;QACtC,eAAe,EAAE,uBAAuB,CAAC,MAAM;KAChD,CAAC;GACW,iBAAiB,CA4C7B","sourcesContent":["import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  effect,\r\n  ElementRef,\r\n  EventEmitter,\r\n  inject,\r\n  input,\r\n  OnInit,\r\n  Output,\r\n  Renderer2,\r\n  ViewChild,\r\n  viewChild\r\n} from '@angular/core';\r\nimport { Post, PostEdit } from '@tt/interfaces/post/post.interface';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { postsActions } from '@tt/data-access';\r\nimport { Store } from '@ngrx/store';\r\n\r\n@Component({\r\n  selector: 'app-edit-post',\r\n  standalone: true,\r\n  imports: [FormsModule],\r\n  templateUrl: './edit-post.component.html',\r\n  styleUrl: './edit-post.component.scss',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class EditPostComponent implements OnInit, AfterViewInit {\r\n  private readonly r2 = inject(Renderer2);\r\n  private readonly store = inject(Store);\r\n  private readonly textAreaTarget =\r\n    viewChild.required<ElementRef<void>>('textAreaTarget');\r\n  public post = input.required<Post>();\r\n  public postEdit: PostEdit = {\r\n    title: '',\r\n    content: '',\r\n  };\r\n  @Output() showEdit = new EventEmitter<boolean>();\r\n  @ViewChild('textAreaTarget') editPost: ElementRef | undefined;\r\n\r\n  constructor() {\r\n    effect(() => {\r\n      this.r2.setStyle(\r\n        this.textAreaTarget().nativeElement,\r\n        'height',\r\n        (this.textAreaTarget().nativeElement as any).scrollHeight + 'px'\r\n      );\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.editPost) {\r\n      this.editPost.nativeElement.focus();\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n      this.postEdit.content = this.post().content;\r\n      this.postEdit.title = this.post().title;\r\n  }\r\n\r\n  submitEditPost() {\r\n    this.store.dispatch(\r\n      postsActions.editPost({ postId: this.post().id, postEdit: this.postEdit })\r\n    );\r\n    this.showEdit.emit(false);\r\n  }\r\n\r\n  cancelEditPost() {\r\n    this.showEdit.emit(false);\r\n  }\r\n}\r\n"]}